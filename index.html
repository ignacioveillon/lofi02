<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>8-Beat Kick Loop</title>
<script src="https://cdn.jsdelivr.net/npm/tone@next"></script>
<style>
  body { background:#121212; color:#eee; font-family:sans-serif; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; }
  button { padding:14px 28px; background:#444; border:none; border-radius:8px; cursor:pointer; color:#fff; font-size:18px; }
  button:hover { background:#666; }
</style>
</head>
<body>

<button id="startBtn">Start Kick Loop</button>

<script>
// Transport setup
Tone.Transport.bpm.value = 90;
Tone.Transport.loop = true;
Tone.Transport.loopEnd = "2m"; // 2 measures = 8 beats in 4/4

// Kick
const kick = new Tone.MembraneSynth({
  pitchDecay: 0.05,
  octaves: 4,
  envelope: { attack: 0.001, decay: 0.3, sustain: 0.0, release: 0.15 }
}).toDestination();

// 8-beat loop (one kick every beat)
const sequence = new Tone.Sequence((time) => {
  kick.triggerAttackRelease("C1", "8n", time);
}, [0,1,2,3,4,5,6,7], "4n").start(0);

// Button control
let playing = false;
document.getElementById("startBtn").addEventListener("click", async() => {
  await Tone.start(); // required before audio
  if (!playing) {
    Tone.Transport.start();
    document.getElementById("startBtn").textContent = "Stop Kick Loop";
  } else {
    Tone.Transport.stop();
    document.getElementById("startBtn").textContent = "Start Kick Loop";
  }
  playing = !playing;
});
</script>

</body>
</html>
